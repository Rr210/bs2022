<!--
 * @Author: Harry
 * @Date: 2022-03-06 16:41:39
 * @LastEditors: harry
 * @Github: https://github.com/rr210
 * @LastEditTime: 2022-04-07 12:54:06
 * @FilePath: \vant-u\src\views\main\components\IconMain.vue
-->
<template>
  <div class="icon-w">
    <div class="icon-w-i">
      <div class="svg_w">
        <svg
          t="1646556002445"
          class="icon"
          viewBox="0 0 1024 1024"
          version="1.1"
          xmlns="http://www.w3.org/2000/svg"
          p-id="3183"
          width="200"
          height="200"
        >
          <path
            d="M476.7232 112.503467L121.634133 279.825067a68.266667 68.266667 0 0 0 1.6896 124.279466l355.089067 155.648a68.266667 68.266667 0 0 0 54.818133 0l355.089067-155.6992a68.266667 68.266667 0 0 0 1.672533-124.279466l-355.089066-167.253334a68.266667 68.266667 0 0 0-58.197334 0zM150.7328 341.572267l355.089067-167.304534 355.072 167.253334-355.089067 155.6992-355.072-155.648zM860.842667 685.346133a34.133333 34.133333 0 0 1 28.962133 61.781334l-2.4064 1.1264-368.810667 155.682133a34.133333 34.133333 0 0 1-23.671466 1.0752l-2.8672-1.0752-368.7936-155.648a34.133333 34.133333 0 0 1 24.064-63.829333l2.491733 0.938666 355.498667 150.050134 355.5328-150.101334z"
            fill="var(--van-tab-text-color)"
            p-id="3184"
          />
          <path
            d="M853.333333 512l-341.486933 153.634133L170.666667 512.341333v55.210667c0 13.4656 7.748267 25.6512 19.712 30.9248l286.190933 126.976a78.7968 78.7968 0 0 0 35.2768 8.3968c12.049067 0 24.081067-2.798933 35.293867-8.3968l286.498133-127.249067A33.7408 33.7408 0 0 0 853.333333 567.278933V512z"
            fill="#00B386"
            p-id="3185"
          />
        </svg>
      </div>
      <div>{{ itemcate }}</div>
    </div>
    <div class="icon-w-i">
      <div class="svg_w">
        <svg
          t="1646556612984"
          class="icon"
          viewBox="0 0 1024 1024"
          version="1.1"
          xmlns="http://www.w3.org/2000/svg"
          p-id="3325"
          width="200"
          height="200"
        >
          <path
            d="M819.2 85.333333H204.8a68.266667 68.266667 0 0 0-68.266667 68.266667v716.8a68.266667 68.266667 0 0 0 68.266667 68.266667h614.4a68.266667 68.266667 0 0 0 68.266667-68.266667V153.6a68.266667 68.266667 0 0 0-68.266667-68.266667zM204.8 153.6h614.4v716.8H204.8V153.6z"
            fill="var(--van-tab-text-color)"
            p-id="3326"
          />
          <path
            d="M665.6 384a34.133333 34.133333 0 0 1 2.56 68.181333L665.6 452.266667H358.4a34.133333 34.133333 0 0 1-2.56-68.181334L358.4 384h307.2z"
            fill="var(--van-tab-text-color)"
            p-id="3327"
          />
          <path
            d="M699.733333 546.133333v34.133334a34.133333 34.133333 0 0 1-34.133333 34.133333H358.4a34.133333 34.133333 0 0 1-34.133333-34.133333v-34.133334h375.466666z"
            fill="#00B386"
            p-id="3328"
          />
        </svg>
      </div>
      <div>{{ itemmc }}</div>
    </div>
    <div class="icon-w-i">
      <div class="svg_w">
        <svg
          t="1646556791680"
          class="icon"
          viewBox="0 0 1024 1024"
          version="1.1"
          xmlns="http://www.w3.org/2000/svg"
          p-id="3466"
          width="200"
          height="200"
        >
          <path
            d="M512 256c-141.397333 0-256 114.602667-256 256s114.602667 256 256 256c141.380267 0 256-114.602667 256-256s-114.619733-256-256-256z m0 68.266667c103.68 0 187.733333 84.053333 187.733333 187.733333s-84.053333 187.733333-187.733333 187.733333c-103.697067 0-187.733333-84.053333-187.733333-187.733333s84.036267-187.733333 187.733333-187.733333zM512 823.005867a34.133333 34.133333 0 0 1 34.030933 31.573333l0.1024 2.56V955.733333a34.133333 34.133333 0 0 1-68.181333 2.542934l-0.085333-2.56v-98.577067a34.133333 34.133333 0 0 1 34.133333-34.133333zM512 34.133333a34.133333 34.133333 0 0 1 34.030933 31.573334L546.133333 68.266667v98.594133a34.133333 34.133333 0 0 1-68.181333 2.56L477.866667 166.843733V68.266667a34.133333 34.133333 0 0 1 34.133333-34.133334zM955.733333 477.866667a34.133333 34.133333 0 0 1 2.542934 68.181333l-2.56 0.085333h-98.594134a34.133333 34.133333 0 0 1-2.542933-68.181333l2.56-0.085333h98.577067zM166.877867 477.866667a34.133333 34.133333 0 0 1 2.56 68.181333l-2.56 0.085333H68.266667a34.133333 34.133333 0 0 1-2.56-68.181333L68.266667 477.866667h98.6112zM731.921067 731.886933a34.133333 34.133333 0 0 1 46.08-1.979733l2.184533 1.9968 69.717333 69.7344a34.133333 34.133333 0 0 1-46.114133 50.261333l-2.167467-1.9968-69.717333-69.7344a34.133333 34.133333 0 0 1 0-48.2816zM174.097067 174.08a34.133333 34.133333 0 0 1 46.097066-1.979733l2.167467 1.9968 69.717333 69.7344a34.133333 34.133333 0 0 1-46.097066 50.261333l-2.167467-1.9968L174.08 222.378667a34.133333 34.133333 0 0 1 0-48.264534zM243.8144 731.904a34.133333 34.133333 0 0 1 50.2784 46.08l-1.9968 2.184533-69.717333 69.7344a34.133333 34.133333 0 0 1-50.2784-46.097066l1.9968-2.167467 69.717333-69.7344z"
            fill="var(--van-tab-text-color)"
            p-id="3467"
          />
          <path
            d="M825.7536 149.9648l48.2816 48.264533L756.053333 316.245333l-48.2816-48.264533z"
            fill="#00B386"
            p-id="3468"
          />
        </svg>
      </div>
      <div>{{ itemnum + "只" }}</div>
    </div>
    <div class="icon-w-i">
      <div class="svg_w">
        <svg
          t="1646556612984"
          class="icon"
          viewBox="0 0 1024 1024"
          version="1.1"
          xmlns="http://www.w3.org/2000/svg"
          p-id="3325"
          width="200"
          height="200"
        >
          <path
            d="M819.2 85.333333H204.8a68.266667 68.266667 0 0 0-68.266667 68.266667v716.8a68.266667 68.266667 0 0 0 68.266667 68.266667h614.4a68.266667 68.266667 0 0 0 68.266667-68.266667V153.6a68.266667 68.266667 0 0 0-68.266667-68.266667zM204.8 153.6h614.4v716.8H204.8V153.6z"
            fill="var(--van-tab-text-color)"
            p-id="3326"
          />
          <path
            d="M665.6 384a34.133333 34.133333 0 0 1 2.56 68.181333L665.6 452.266667H358.4a34.133333 34.133333 0 0 1-2.56-68.181334L358.4 384h307.2z"
            fill="var(--van-tab-text-color)"
            p-id="3327"
          />
          <path
            d="M699.733333 546.133333v34.133334a34.133333 34.133333 0 0 1-34.133333 34.133333H358.4a34.133333 34.133333 0 0 1-34.133333-34.133333v-34.133334h375.466666z"
            fill="#00B386"
            p-id="3328"
          />
        </svg>
      </div>
      <div>{{ itemrate }}</div>
    </div>
  </div>
  <div class="item_pest_w">
    <van-tabs class="van-tabs-custom" v-model:active="activeIndex" @click-tab="leftChangeNav">
      <van-tab v-for="item in tabLists" :key="item.pid" :name="item.value" :title="item.text">
        <p class="detailcon">{{ detailCont }}</p>
      </van-tab>
    </van-tabs>
  </div>
</template>

<script>
import { onMounted, reactive, toRefs } from '@vue/runtime-core'
import { SEARCH_PEST_URL } from '@/utils/api/urlapi'
import { Toast } from 'vant'
import { searchPest } from '@/utils/service/main'
import { DETAIL_PEST } from '@/utils/content/cate.js'
export default {
  name: 'IconMain',
  props: {
    itemcate: {
      type: String,
      required: true,
      default: ''
    },
    itemmc: {
      type: String,
      required: true,
      default: ''
    },
    itemnum: {
      type: Number,
      required: true,
      default: 0
    },
    itemrate: {
      type: String,
      required: true,
      default: ''
    }
  },
  setup(props) {
    //   获取数据
    const state = reactive({
      pici: {},
      tabLists: DETAIL_PEST,
      activeIndex: 'harm_feat',
      detailCont: ''
    })

    // 处理识别详情的结果
    const getPestItem = async function (e) {
      const { data: res } = await searchPest(SEARCH_PEST_URL, {
        params: {
          key: e
        }
      })
      console.log(res)
      if (res.status_code === 1 && res.data.length > 0) {
        state.pici = res.data[0]
        getResultDetail()
      } else {
        Toast({
          message: '未找到害虫数据'
        })
      }
    }
    const getResultDetail = function () {
      const name = state.activeIndex
      state.detailCont = state.pici[name]
    }
    const leftChangeNav = function (e) {
      getResultDetail()
    }
    onMounted(() => {
      getPestItem(props.itemmc)
    })
    return {
      getPestItem,
      leftChangeNav,
      ...toRefs(state)
    }
  }
}
</script>

<style lang="less" scoped>
.icon-w {
  margin-top: 10px;
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 15px;
  text-align: center;
  .icon-w-i {
    flex: 1;
    .svg_w {
      padding: 20px 30px 5px 30px;
      svg {
        width: 100%;
        height: 100%;
      }
    }
  }
}
.item_pest_w {
  padding: 10px;
  font-size: 15px;
}
</style>
